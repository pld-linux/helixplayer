--- hxplay-1.0.1/datatype/ogg/fileformat/unix.pcf.orig	2003-09-10 22:21:27.000000000 +0200
+++ hxplay-1.0.1/datatype/ogg/fileformat/unix.pcf	2004-11-18 01:24:56.178668520 +0100
@@ -1,3 +1,3 @@
 
-project.AddLibraries(os.path.join(GetSDKPath("oggvorbissdk"), "lib", "libogg.a"))
-project.AddLibraries(os.path.join(GetSDKPath("oggvorbissdk"), "lib", "libvorbis.a"))
+project.AddSystemLibraries("ogg")
+project.AddSystemLibraries("vorbis")
--- hxplay-1.0.1/datatype/theora/renderer/linux2.pcf.orig	2004-07-09 20:31:54.000000000 +0200
+++ hxplay-1.0.1/datatype/theora/renderer/linux2.pcf	2004-11-18 01:27:21.856522120 +0100
@@ -51,9 +51,6 @@
 
 UmakefileVersion(2,1)
 
-oggLibPath = os.path.join(GetSDKPath("oggvorbissdk"), "lib")
+project.AddSystemLibraries("ogg", "theora")
 
-project.AddLibraries(os.path.join(oggLibPath, "libogg.a"),
-                     os.path.join(oggLibPath, "libtheora.a"))
-
-project.AddSystemLibraries("pthread")
\ Brak znaku nowej linii na koñcu pliku
+project.AddSystemLibraries("pthread")
--- hxplay-1.0.1/datatype/vorbis/renderer/unix.pcf.orig	2003-09-10 22:20:58.000000000 +0200
+++ hxplay-1.0.1/datatype/vorbis/renderer/unix.pcf	2004-11-18 01:27:04.108220272 +0100
@@ -1,3 +1,3 @@
 
-project.AddLibraries(os.path.join(GetSDKPath("oggvorbissdk"), "lib", "libogg.a"))
-project.AddLibraries(os.path.join(GetSDKPath("oggvorbissdk"), "lib", "libvorbis.a"))
+project.AddSystemLibraries("ogg")
+project.AddSystemLibraries("vorbis")
--- hxplay-1.0.1/build/build/BIF/build.bif.orig	2004-09-27 23:57:27.000000000 +0200
+++ hxplay-1.0.1/build/build/BIF/build.bif	2004-11-20 23:11:50.721370496 +0100
@@ -895,7 +895,7 @@
     
       <dependlist>
         common_include common_container common_util common_system common_fileio
-        common_netio common_lang_xml common_import_zlib common_auth_authmgr common_auth_rn5auth
+        common_netio common_lang_xml common_auth_authmgr common_auth_rn5auth
       </dependlist>
     </module>
 
@@ -1073,22 +1073,10 @@
       <attribute id="no_build"/>
     
       <dependlist>
-        common_import_expat common_import_stlport common_import_zlib common_import_bzip2
+        common_import_expat common_import_stlport
       </dependlist>
     </module>
 
-    <!-- COMMON_IMPORT_BZIP2 -->
-    <module id="common_import_bzip2" name="common/import/bzip2" group="core">
-      <cvs root="helix"/>
-      <cvstag id="hxclient_1_4_2_neptunex" type="branch"/>
-    
-    
-      <includeplatforms>
-        unix win32
-      </includeplatforms>
-    
-    </module>
-
     <!-- COMMON_IMPORT_EXPAT -->
     <module id="common_import_expat" name="common/import/expat" group="core">
       <cvs root="helix"/>
@@ -1128,18 +1116,6 @@
     
     </module>
 
-    <!-- COMMON_IMPORT_ZLIB -->
-    <module id="common_import_zlib" name="common/import/zlib" group="core">
-      <cvs root="helix"/>
-      <cvstag id="hxclient_1_4_2_neptunex" type="branch"/>
-    
-    
-      <includeplatforms>
-        unix mac win32 openwave tm1 wince
-      </includeplatforms>
-    
-    </module>
-
     <!-- COMMON_INCLUDE -->
     <module id="common_include" name="common/include" group="core">
       <cvs root="helix"/>
@@ -2330,7 +2306,7 @@
     
       <dependlist>
         common_runtime common_dbgtool common_util common_system common_container
-        common_fileio common_netio common_import_zlib protocol_http protocol_common_util
+        common_fileio common_netio protocol_http protocol_common_util
         datatype_rm_common datatype_common_util datatype_image_common datatype_image_jpg_import_jpeg-6b datatype_dist_flash_common
         datatype_dist_flash_renderer
       </dependlist>
@@ -2381,9 +2357,9 @@
     
       <dependlist>
         common_runtime common_util common_container common_dbgtool common_system
-        common_lang_xml common_import_zlib datatype_common_baserend datatype_common_util datatype_image_common
+        common_lang_xml datatype_common_baserend datatype_common_util datatype_image_common
         datatype_image_jpg_import_jpeg-6b datatype_image_jpg_common datatype_image_jpg_fileformat datatype_image_jpg_renderer datatype_image_gif_common
-        datatype_image_gif_fileformat datatype_image_gif_renderer datatype_image_png_import_libpng datatype_image_png_common datatype_image_png_fileformat
+        datatype_image_gif_fileformat datatype_image_gif_renderer datatype_image_png_common datatype_image_png_fileformat
         datatype_image_png_renderer datatype_image_realpix_codec_jpg datatype_image_realpix_codec_gif datatype_image_realpix_codec_png datatype_image_realpix_fileformat
         datatype_image_realpix_renderer datatype_image_wbmp_common datatype_image_wbmp_fileformat datatype_image_wbmp_renderer
       </dependlist>
@@ -2552,7 +2528,7 @@
     
       <source_dependlist>
         common_include common_container common_dbgtool common_util common_runtime
-        common_import_zlib common_lang_xml client_include client_resource datatype_common_util
+        common_lang_xml client_include client_resource datatype_common_util
       </source_dependlist>
     </module>
 
@@ -2629,7 +2605,7 @@
     
       <dependlist>
         common_runtime common_util common_dbgtool common_container common_system
-        common_import_zlib datatype_common_util datatype_image_common datatype_image_gif_common
+        datatype_common_util datatype_image_common datatype_image_gif_common
       </dependlist>
       <source_dependlist>
         common_include client_include
@@ -2746,7 +2710,7 @@
       </includeplatforms>
     
       <dependlist>
-        datatype_image_png_import_libpng datatype_image_png_common datatype_image_png_fileformat datatype_image_png_renderer
+        datatype_image_png_common datatype_image_png_fileformat datatype_image_png_renderer
       </dependlist>
     </module>
 
@@ -2761,8 +2725,7 @@
       </includeplatforms>
     
       <source_dependlist>
-        common_include common_util common_dbgtool client_include common_import_zlib
-        datatype_image_png_import_libpng
+        common_include common_util common_dbgtool client_include
       </source_dependlist>
     </module>
 
@@ -2783,28 +2746,13 @@
     
       <dependlist>
         common_runtime common_system common_util common_container common_dbgtool
-        common_import_zlib datatype_image_common datatype_image_png_common datatype_image_png_import_libpng
+        datatype_image_common datatype_image_png_common
       </dependlist>
       <source_dependlist>
         common_include client_resource
       </source_dependlist>
     </module>
 
-    <!-- DATATYPE_IMAGE_PNG_IMPORT_LIBPNG -->
-    <module id="datatype_image_png_import_libpng" name="datatype/image/png/import/libpng" group="core">
-      <cvs root="helix"/>
-      <cvstag id="hxclient_1_4_2_neptunex" type="branch"/>
-    
-    
-      <includeplatforms>
-        unix mac win32
-      </includeplatforms>
-    
-      <source_dependlist>
-        common_import_zlib
-      </source_dependlist>
-    </module>
-
     <!-- DATATYPE_IMAGE_PNG_RENDERER -->
     <module id="datatype_image_png_renderer" name="datatype/image/png/renderer" group="core">
       <cvs root="helix"/>
@@ -2821,8 +2769,8 @@
       </excludeprofiles>
     
       <dependlist>
-        common_runtime common_util common_container common_dbgtool common_import_zlib
-        datatype_common_util datatype_common_baserend datatype_image_common datatype_image_png_common datatype_image_png_import_libpng
+        common_runtime common_util common_container common_dbgtool
+        datatype_common_util datatype_common_baserend datatype_image_common datatype_image_png_common
       </dependlist>
       <source_dependlist>
         common_include client_include common_system
@@ -2924,8 +2872,7 @@
     
       <dependlist>
         common_runtime common_system common_system common_util common_container
-        common_dbgtool common_import_zlib datatype_common_util datatype_image_common datatype_image_png_common
-        datatype_image_png_import_libpng
+        common_dbgtool datatype_common_util datatype_image_common datatype_image_png_common
       </dependlist>
       <source_dependlist>
         common_include client_include
@@ -5008,7 +4955,7 @@
     
       <dependlist>
         common_container common_util common_system common_runtime common_dbgtool
-        common_fileio common_import_zlib protocol_http protocol_common_util filesystem_data
+        common_fileio protocol_http protocol_common_util filesystem_data
       </dependlist>
       <source_dependlist>
         common_include
@@ -5181,7 +5128,7 @@
     
     
       <dependlist>
-        installer_common_util common_import_bzip2
+        installer_common_util
       </dependlist>
       <source_dependlist>
         common_runtime common_system common_container common_dbgtool common_util
@@ -6070,7 +6017,7 @@
       </dependlist>
       <source_dependlist>
         common_include common_runtime common_util common_netio common_import_stlport
-        common_import_zlib client_core client_common_container client_common_system client_common_netio
+        client_core client_common_container client_common_system client_common_netio
         client_netwksvc client_common_netio server_include server_protocol_sap server_engine_context
         server_common_util server_common_netio protocol_sdp
       </source_dependlist>
@@ -6769,7 +6716,7 @@
     
       <dependlist>
         common_dbgtool common_container common_system common_util common_netio
-        common_import_zlib common_runtime client_common_container client_common_system client_netwksvc
+        common_runtime client_common_container client_common_system client_netwksvc
         client_common_netio protocol_common_util protocol_http producersdk_common_util producersdk_common_logutil
         producersdk_common_system producersdk_plugins_util producersdk_common_context
       </dependlist>
@@ -8064,7 +8011,7 @@
         server_common_util server_common_netio server_common_struct server_protocol_http server_qos_core
         server_qos_session server_qos_transport server_capex protocol_http protocol_rtsp
         protocol_sdp protocol_transport_common_system protocol_transport_rtp protocol_common_util common_lang_xml
-        common_dbgtool common_fileio common_import_zlib common_netio common_system
+        common_dbgtool common_fileio common_netio common_system
         common_container common_util common_runtime
       </dependlist>
       <source_dependlist>
@@ -8091,7 +8038,7 @@
         server_common_netio server_common_struct server_protocol_http server_qos_core server_qos_session
         server_qos_transport server_capex protocol_http protocol_rtsp protocol_sdp
         protocol_transport_common_system protocol_transport_rtp protocol_common_util common_lang_xml common_dbgtool
-        common_fileio common_import_zlib common_netio common_system common_container
+        common_fileio common_netio common_system common_container
         common_util common_runtime
       </dependlist>
       <source_dependlist>
@@ -8154,7 +8101,7 @@
         server_engine_session server_engine_dataflow server_engine_netio server_common_util server_common_netio
         server_common_struct server_protocol_http server_qos_core server_qos_transport server_qos_session
         protocol_http protocol_rtsp protocol_sdp protocol_transport_common_system protocol_transport_rtp
-        protocol_common_util common_lang_xml common_dbgtool common_fileio common_import_zlib
+        protocol_common_util common_lang_xml common_dbgtool common_fileio
         common_netio common_system common_container common_util common_runtime
       </dependlist>
       <source_dependlist>
@@ -8422,7 +8369,7 @@
     
       <source_dependlist>
         common_include common_system common_util common_container common_dbgtool
-        common_runtime common_import_bzip2 server_installer_common_hxarchive
+        common_runtime server_installer_common_hxarchive
       </source_dependlist>
     </module>
 
@@ -8650,7 +8597,7 @@
     
       <source_dependlist>
         common_include common_runtime common_container common_util common_netio
-        common_dbgtool common_import_zlib common_system protocol_sdp server_common_struct
+        common_dbgtool common_system protocol_sdp server_common_struct
         server_common_util server_common_netio server_include
       </source_dependlist>
     </module>
@@ -9241,7 +9188,7 @@
     
       <dependlist>
         server_installer_common_util server_installer_common_hxarchive server_installer_common_uninstall server_installer_common common_runtime
-        common_dbgtool common_container common_system common_util common_import_bzip2
+        common_dbgtool common_container common_system common_util
       </dependlist>
     </module>
 
--- hxplay-1.0.1/datatype/image/png/renderer/umakedll.orig	2004-07-09 03:52:28.000000000 +0200
+++ hxplay-1.0.1/datatype/image/png/renderer/umakedll	2004-11-21 00:43:28.853527360 +0100
@@ -58,15 +58,15 @@
                            "common/util[utillib]",
                            "common/container[contlib]",
                            "common/dbgtool[debuglib]",
-                           "common/import/zlib[zlib]",
                            "common/system[syslib]",
                            "datatype/common/baserend[baserend]",
                            "datatype/common/util[dtutillib]",
                            "datatype/image/common[imgcomlib]",
                            "datatype/image/png/common[pngcomlib]",
-                           "datatype/image/png/import/libpng[libpng]",
                            "datatype/image/png/renderer[pngrlib]")
 
+project.AddSystemLibraries("png", "z")
+
 project.AddSources("pngrdll.cpp")
 
 project.ExportFunction("RMACreateInstance",
--- hxplay-1.0.1/datatype/image/png/renderer/umakelib.orig	2004-07-09 03:52:28.000000000 +0200
+++ hxplay-1.0.1/datatype/image/png/renderer/umakelib	2004-11-21 00:43:51.108144144 +0100
@@ -58,12 +58,10 @@
                           "common/dbgtool/pub",
                           "common/util/pub",
                           "common/system/pub",
-                          "common/import/zlib/pub",
                           "datatype/common/util/pub",
                           "datatype/common/baserend/pub",
                           "datatype/image/common/pub",
-                          "datatype/image/png/common/pub",
-                          "datatype/image/png/import/libpng")
+                          "datatype/image/png/common/pub")
 
 project.AddSources("pxpngrnd.cpp")
 
--- hxplay-1.0.1/datatype/image/png/fileformat/umakedll.orig	2004-07-09 03:52:41.000000000 +0200
+++ hxplay-1.0.1/datatype/image/png/fileformat/umakedll	2004-11-21 00:41:16.849595008 +0100
@@ -55,14 +55,14 @@
 
 project.AddModuleLibraries("datatype/image/png/fileformat[pngflib]",
                            "datatype/image/png/common[pngcomlib]",
-                           "datatype/image/png/import/libpng[libpng]",
                            "datatype/image/common[imgcomlib]",
                            "common/util[utillib]",
                            "common/container[contlib]",
                            "common/dbgtool[debuglib]",
                            "common/system[syslib]",
-                           "common/runtime[runtlib]",
-                           "common/import/zlib[zlib]")
+                           "common/runtime[runtlib]")
+
+project.AddSystemLibraries("png", "z")
 
 project.AddSources("pngfdll.cpp")
 
--- hxplay-1.0.1/datatype/image/png/fileformat/umakelib.orig	2004-07-09 03:52:41.000000000 +0200
+++ hxplay-1.0.1/datatype/image/png/fileformat/umakelib	2004-11-21 00:41:46.779045040 +0100
@@ -57,12 +57,10 @@
                           "common/dbgtool/pub",
                           "common/util/pub",
                           "common/system/pub",
-                          "common/import/zlib/pub",
                           "client/resource/pub")
 
 project.AddIncludes("../common/pub",
-                    "../../common/pub",
-                    "../import/libpng")
+                    "../../common/pub")
 
 project.AddSources("pxpngff.cpp")
 
--- hxplay-1.0.1/datatype/image/png/common/Umakefil.orig	2004-07-09 03:52:11.000000000 +0200
+++ hxplay-1.0.1/datatype/image/png/common/Umakefil	2004-11-21 00:05:20.788366136 +0100
@@ -57,10 +57,7 @@
                           "common/container/pub",
                           "common/runtime/pub",
                           "common/system/pub",
-                          "client/include",
-                          "common/import/zlib/pub")
-
-project.AddIncludes("../import/libpng")
+                          "client/include")
 
 project.AddSources("pxpngdec.cpp")
 
--- hxplay-1.0.1/datatype/image/png/common/pxpngdec.cpp.orig	2004-07-09 03:52:12.000000000 +0200
+++ hxplay-1.0.1/datatype/image/png/common/pxpngdec.cpp	2004-11-21 00:38:28.662163384 +0100
@@ -63,6 +63,8 @@
 // pxcomlib
 
 // libpng
+// INTERNAL needed for PNG_INVERT_ALPHA
+#define PNG_INTERNAL
 #include "png.h"
 
 // pxpnglib
@@ -77,6 +79,15 @@
 #include "errdbg.h"
 #include "hxperf.h"
 
+/* from hacked libpng 1.2.5 included in Helix sources */
+/* extern PNG_EXPORT(void,png_clear_invert_alpha) PNGARG((png_structp png_ptr)); */
+static void PNGAPI
+png_clear_invert_alpha(png_structp png_ptr)
+{
+   png_debug(1, "in png_clear_invert_alpha\n");
+   png_ptr->transformations &= ~PNG_INVERT_ALPHA;
+}
+
 PXPNGDecode::PXPNGDecode()
 {
     m_lRefCount = 0;
--- hxplay-1.0.1/datatype/image/realpix/codec/png/umakedll.orig	2004-07-09 03:51:04.000000000 +0200
+++ hxplay-1.0.1/datatype/image/realpix/codec/png/umakedll	2004-11-21 00:50:03.516529464 +0100
@@ -55,15 +55,15 @@
 
 project.AddModuleLibraries("datatype/image/realpix/codec/png[rppnglib]",
                            "datatype/image/png/common[pngcomlib]",
-                           "datatype/image/png/import/libpng[libpng]",
                            "datatype/image/common[imgcomlib]",
                            "datatype/common/util[dtutillib]",
                            "common/system[syslib]",
                            "common/dbgtool[debuglib]",
                            "common/util[utillib]",
                            "common/container[contlib]",
-                           "common/runtime[runtlib]",
-                           "common/import/zlib[zlib]")
+                           "common/runtime[runtlib]")
+
+project.AddSystemLibraries("png", "z")
 
 project.AddSources("pxcpngfa.cpp")
 
--- hxplay-1.0.1/datatype/image/realpix/codec/png/umakelib.orig	2004-07-09 03:51:04.000000000 +0200
+++ hxplay-1.0.1/datatype/image/realpix/codec/png/umakelib	2004-11-21 00:50:26.226077088 +0100
@@ -57,12 +57,10 @@
                           "common/container/pub",
                           "common/dbgtool/pub",
                           "common/runtime/pub",
-                          "common/system/pub",
-                          "common/import/zlib/pub")
+                          "common/system/pub")
 
 project.AddIncludes("../../../common/pub",
-                    "../../../png/common/pub",
-                    "../../../png/import/libpng")
+                    "../../../png/common/pub")
 
 project.AddSources("pxcpngff.cpp",
                    "pxcpngrn.cpp")
--- hxplay-1.0.1/filesystem/http/Umakefil.orig	2004-07-09 04:04:03.000000000 +0200
+++ hxplay-1.0.1/filesystem/http/Umakefil	2004-11-21 00:52:44.600041048 +0100
@@ -76,7 +76,7 @@
 
 if project.IsDefined("HELIX_FEATURE_HTTP_GZIP"):
     project.AddSources("decoder.cpp")
-    project.AddModuleLibraries("common/import/zlib[zlib]")
+    project.AddSystemLibraries("z")
 
 project.ExportFunction("RMACreateInstance",
                        "IUnknown** ppObj",
